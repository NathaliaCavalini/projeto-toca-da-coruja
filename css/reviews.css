

/* Login and Empty state messages */
.login-message, .empty-reviews {
    text-align: center;
    padding: 40px 20px;
    background: var(--color-primary);
    border-radius: var(--radius);
    margin: 20px;
    color: var(--color-text);
}

/* Ocultar elementos (para busca) */
.hidden {
    display: none !important;
}

.book-grid > .login-message,
.book-grid > .empty-reviews {
    grid-column: 1 / -1;
    max-width: 760px;
    margin: 20px auto;
    box-shadow: var(--shadow);
}

.login-button, .browse-books {
    display: inline-block;
    margin-top: 16px;
    padding: 8px 24px;
    background-color: var(--color-accent);
    color: white;
    text-decoration: none;
    border-radius: 6px;
    transition: background-color 0.2s;
}

.login-button:hover, .browse-books:hover {
    background-color: var(--color-accent);
    opacity: 0.9;
}

/* Floating review card */
.floating-review-wrapper {
    position: fixed;
    right: 20px;
    bottom: 24px;
    z-index: 1200;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
    will-change: bottom;
}

/* Ensure footer sits above floating widgets that might overlap on small screens */
.footer {
    position: relative;
    z-index: 1000;
}

.floating-btn {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--color-accent);
    color: #fff;
    border: none;
    box-shadow: 0 8px 20px rgba(0,0,0,0.18);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    cursor: pointer;
}

.floating-review-card {
    width: 320px;
    max-width: calc(100vw - 48px);
    background: var(--color-muted);
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.18);
    padding: 12px;
    color: var(--color-text);
    transform-origin: bottom right;
    transition: transform 180ms ease, opacity 180ms ease;
    opacity: 0;
    transform: translateY(10px) scale(0.98);
    pointer-events: none;
}

.floating-review-card.open {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

.floating-review-card h4 { margin: 0 0 8px 0; font-size: 1rem; }
.floating-review-card label { font-size: 0.85rem; display:block; margin-top:8px; }
.floating-review-card select, .floating-review-card textarea, .floating-review-card input[type="number"] {
    width: 100%;
    padding: 8px 10px;
    margin-top:6px;
    border-radius: 8px;
    border: 1px solid rgba(0,0,0,0.08);
    background: #fff;
    font-size: 0.95rem;
}
.floating-review-card textarea { min-height: 84px; resize: vertical; word-wrap: break-word; word-break: break-word; overflow-wrap: break-word; }
.floating-review-card .row { display:flex; gap:8px; align-items:center; }
.floating-review-card .actions { display:flex; gap:8px; justify-content:flex-end; margin-top:10px; }
.floating-review-card .btn-cancel { background:transparent; border:1px solid rgba(0,0,0,0.08); padding:8px 12px; border-radius:8px; cursor:pointer; }
.floating-review-card .btn-submit { padding:8px 12px; border-radius:8px; border:none; background:var(--color-accent); color:#fff; cursor:pointer; }

/* ANIMAÇÕES DE CAFÉ - PROFISSIONAL */

/* Animação de adição com gotinhas */
@keyframes coffeeSpread {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    40% {
        transform: scale(1.05);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Gotinhas com diferentes velocidades e tamanhos - ADIÇÃO */
@keyframes coffeDropletBurst {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    30% {
        opacity: 1;
    }
    100% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
    }
}

@keyframes coffeDropletBurstMedium {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    40% {
        opacity: 1;
    }
    100% {
        transform: translate(calc(var(--tx) * 0.75), calc(var(--ty) * 0.75)) scale(0);
        opacity: 0;
    }
}

@keyframes coffeDropletBurstSlow {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    50% {
        opacity: 1;
    }
    100% {
        transform: translate(calc(var(--tx) * 0.5), calc(var(--ty) * 0.5)) scale(0);
        opacity: 0;
    }
}

/* Gotinhas voltando ao deletar */
@keyframes coffeDropletReverse {
    0% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
    }
    70% {
        opacity: 1;
    }
    100% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
}

@keyframes coffeDropletReverseMedium {
    0% {
        transform: translate(calc(var(--tx) * 0.75), calc(var(--ty) * 0.75)) scale(0);
        opacity: 0;
    }
    60% {
        opacity: 1;
    }
    100% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
}

@keyframes coffeDropletReverseSlow {
    0% {
        transform: translate(calc(var(--tx) * 0.5), calc(var(--ty) * 0.5)) scale(0);
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
}

.book-item.coffee-add {
    animation: coffeeSpread 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Gotinhas que saem do card */
.droplet {
    position: fixed;
    width: 6px;
    height: 6px;
    background: #A0826D;
    border-radius: 50%;
    pointer-events: none;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    z-index: 10000;
}

.droplet.size-small {
    width: 4px;
    height: 4px;
    background: #B8956A;
}

.droplet.size-medium {
    width: 6px;
    height: 6px;
    background: #A0826D;
}

.droplet.size-large {
    width: 8px;
    height: 8px;
    background: #8B6914;
}

/* ADIÇÃO - Gotinhas saindo rapidamente */
.droplet.burst-fast {
    animation: coffeDropletBurst 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.droplet.burst-medium {
    animation: coffeDropletBurstMedium 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.droplet.burst-slow {
    animation: coffeDropletBurstSlow 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* DELEÇÃO - Gotinhas voltando */
.droplet.reverse-fast {
    animation: coffeDropletReverse 0.4s cubic-bezier(0.64, 0, 0.34, 0) forwards;
}

.droplet.reverse-medium {
    animation: coffeDropletReverseMedium 0.6s cubic-bezier(0.64, 0, 0.34, 0) forwards;
}

.droplet.reverse-slow {
    animation: coffeDropletReverseSlow 0.8s cubic-bezier(0.64, 0, 0.34, 0) forwards;
}

/* Animação de deletar - reverse */
@keyframes coffeeRemove {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    40% {
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% {
        transform: scale(0);
        opacity: 0;
    }
}

.book-item.coffee-delete {
    animation: coffeeRemove 0.5s cubic-bezier(0.64, 0, 0.34, 0) forwards;
}

/* Responsividade */
@media (max-width: 520px) {
    .floating-review-wrapper { right: 12px; bottom: 16px; }
    .floating-review-card { width: 92vw; }
}